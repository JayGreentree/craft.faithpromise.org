{% extends "_layout/layout.twig" %}

{% set page_image = entry.pageImage[0] ?? null %}

{% block content %}

    {# Hero
    ============================== #}
    {% embed '_layout/hero.twig' with { 'image' : page_image } %}
        {% block text %}
            {{ entry.intro }}
        {% endblock %}
    {% endembed %}

    {# Templates that extend this one
    can output content here
    ============================== #}

    {% block page_content %}{% endblock %}

    {# CMS Content
    ============================== #}

    {% set blocks = entry.pageContent.find({
        with: [
        'text:image',
        'staff:team',
        'events:ministry',
        'blocks:blocks',
    ]
    }) %}

    {% for block in entry.pageContent %}

        {% set params = {
        title: block.blockTitle,
        text: block.text,
        linkUrl_1: block['linkUrl_1'] is defined ? block.linkUrl_1 : '',
        linkText_1: block['linkText_1'] is defined ? block.linkText_1 : '',
        linkUrl_1: block['linkUrl_2'] is defined ? block.linkUrl_2 : '',
        linkText_1: block['linkText_2'] is defined ? block.linkText_2 : '',
        align: block['align'] is defined ? block.align : 'left',
        background: block['background'] is defined ? block.background : 'default',
        videoUrl: block['videoUrl'] is defined and block.videoUrl | length ? block.videoUrl : false,
        image: block['image'] is defined and block.image | length ? block.image[0] : false,
        imageLayout: block['imageLayout'] is defined ? block.imageLayout : 'default',
        id: 'matrix-block-' ~ block['id'],
        } %}

        {% include 'pages/blocks/' ~ block.type ~ '.twig' ignore missing %}

    {% endfor %}

{% endblock %}